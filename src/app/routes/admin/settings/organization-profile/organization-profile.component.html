<div class="m-3 d-flex flex-column flex-xl-row">
  <div class="flex-fill d-flex flex-column">
    <div class="tql-panel">
      <div class="panel-body no-padding">
        <div class="settings mx-auto p-0">
          <form #paramEditForm="ngForm" name="form">
            <div class="infos">
              <div class="row">
                <div class="col-sm-4 col-lg-2">
                  <div class="row flex-column">
                    <label class="label text-center mb-0">Upload Logo</label>
                    <div class="logo p-3 mx-auto mb-3">
                      <div (click)="onUpdateFile('logo-file')" [ngClass]="{'disabled': !isEditing}"
                        class="cl_light_jungle_green-background rounded-circle d-flex justify-content-center align-items-center overflow-hidden h-100 cursor-pointer">
                        <!-- <img src="./assets/images/Chevron_Logo_white.png" *ngIf="!settingsDetail?.logo"
                          class="w-100 h-100 p-5"/> -->
                        <img [src]="'data:image/png;base64,' + settingsDetail?.logo" *ngIf="settingsDetail?.logo" class="w-50" />
                        <div class="upload-icon" *ngIf="isEditing">
                          <i class="fal fa-upload h4 m-0"></i>
                        </div>
                      </div>
                      <input id='logo-file' name="logo" type="file" (change)="onFileChange($event, 'logo')">
                    </div>
                    <div class="small text-danger text-center px-3"><i>{{uploadError.logo}}</i></div>
                  </div>
                  <div class="row flex-column">
                    <label class="label text-center mb-0">Upload Favicon</label>
                    <div class="fav p-3 mx-auto mb-3">
                      <div (click)="onUpdateFile('fav-file')" [ngClass]="{'disabled': !isEditing}"
                        class="cl_light_jungle_green-background rounded-circle d-flex justify-content-center align-items-center overflow-hidden h-100 cursor-pointer">
                        <!-- <img src="./assets/images/logo.png" *ngIf="!settingsDetail?.favicon"
                          class="w-100 h-100 p-3"/> -->
                        <img [src]="'data:image/png;base64,' + settingsDetail?.favicon" *ngIf="settingsDetail?.favicon" class="w-50" />
                        <div class="upload-icon" *ngIf="isEditing">
                          <i class="fal fa-upload h4 m-0"></i>
                        </div>
                      </div>
                      <input id='fav-file' name="favicon" type="file" (change)="onFileChange($event, 'favicon')">
                    </div>
                    <div class="small text-danger text-center px-3"><i>{{uploadError.favicon}}</i></div>
                  </div>
                </div>
                <div class="col-sm-7 col-lg-4 offset-lg-1">
                  <ng-template ngFor let-fieldName [ngForOf]="displayFields" let-ind="index">
                    <ng-template ngFor let-formItem [ngForOf]="params" let-i="index">
                      <div class="item d-flex mb-4" *ngIf="ind<5 && fieldName === formItem.VarName">
                        <label class="label mr-5" [for]="'param'+i">{{formItem.VarName}}</label>
                        <div class="form-group flex-grow-1">
                          <input class="form-control control no-radius-input" type="text" [name]="'param'+i" required
                            [(ngModel)]="paramsValue[formItem.sVarId]" [disabled]="!isEditing"
                            [ngClass]="{'text-cl_blue': fieldName === 'Company Logo URL'}">
                        </div>
                      </div>
                    </ng-template>
                  </ng-template>
                </div>
                <div class="col-sm-7 col-lg-4 offset-lg-1 offset-sm-4">
                  <ng-template ngFor let-fieldName [ngForOf]="displayFields" let-ind="index">
                    <ng-template ngFor let-formItem [ngForOf]="params" let-i="index">
                      <div class="item d-flex mb-4" *ngIf="ind>4 && fieldName === formItem.VarName">
                        <label class="label mr-5" [for]="'param'+i">{{formItem.VarName}}</label>
                        <div class="form-group flex-grow-1">
                          <input class="form-control control no-radius-input" type="text" [name]="'param'+i" required
                            [(ngModel)]="paramsValue[formItem.sVarId]" [disabled]="!isEditing"
                            [ngClass]="{'text-cl_blue': fieldName === 'Company Logo URL'}">
                        </div>
                      </div>
                    </ng-template>
                  </ng-template>
                </div>
              </div>
              <div class="d-flex justify-content-end mt-2 mb-1">
                <button type="submit" class="btn-i btn-i-icon btn-edit text-white" *ngIf="!isEditing" 
                  mat-raised-button [class.mat-elevation-z8]="true"
                  (click)="isEditing=true"><i class="fal fa-pen ml-0 mr-1"></i> Edit</button>
                <button type="button" class="mx-2 btn-i btn-i-icon btn-cancel ml-3 text-white" *ngIf="isEditing"
                  mat-raised-button [class.mat-elevation-z8]="true"
                  (click)="doCancel()"><i class="far fa-ban mr-1"></i> Cancel</button>
                <button type="submit" class="btn-i btn-i-icon btn-save text-white" *ngIf="isEditing"
                  mat-raised-button [class.mat-elevation-z8]="true"
                  (click)="doUpdate()"><i class="fal fa-check ml-0 mr-1"></i> Update</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>